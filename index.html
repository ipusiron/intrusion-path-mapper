<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Day083 - AI Attack Path Finder</title>
  <link rel="stylesheet" href="./css/style.css" />
  <!-- D3.js v7 CDN -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <header class="app-header">
    <h1>AI Attack Path Finder <span class="badge">MVP</span></h1>
    <div class="actions">
      <label class="file-btn">
        JSONインポート
        <input type="file" id="fileInput" accept="application/json" />
      </label>
      <button id="exportBtn">JSONエクスポート</button>
      <a class="btn" href="./sample-data/sample-facility.json" download>サンプルDL</a>
    </div>
  </header>

  <main class="layout">
    <aside class="sidebar">
      <section class="panel">
        <h2>解析設定</h2>
        <div class="field">
          <label for="startSelect">初期侵入点</label>
          <select id="startSelect"></select>
        </div>
        <div class="field">
          <label for="goalSelect">攻撃目標</label>
          <select id="goalSelect"></select>
        </div>
        <div class="field">
          <label for="nodePenalty">ノード難易度の重み (0〜2)</label>
          <input id="nodePenalty" type="number" value="0.4" min="0" max="2" step="0.1" />
        </div>
        <button id="analyzeBtn">最短経路を探索</button>

        <div id="results" class="results">
          <h3>結果</h3>
          <div class="stat"><span>総コスト:</span> <strong id="costVal">-</strong></div>
          <div class="path" id="pathVal">経路: -</div>
        </div>
      </section>

      <section class="panel">
        <h2>ノード情報</h2>
        <div id="nodeInfo" class="node-info">（ノードをクリック）</div>
      </section>

      <section class="panel">
        <h2>ヒント</h2>
        <ul class="tips">
          <li>ノードをドラッグしてレイアウト調整できます</li>
          <li>エッジの <code>weight</code> は移動コストです（小さいほど易）</li>
          <li>ノードの <code>vuln</code> は脆弱度（大きいほど攻撃成功しやすい）</li>
        </ul>
      </section>
    </aside>

    <section class="canvas-wrap">
      <svg id="graph" width="100%" height="100%"></svg>
    </section>
  </main>

  <footer>
    <div class="footer">
      🔗 GitHubリポジトリはこちら（
      <a href="https://github.com/ipusiron/day083-ai-attack-path-finder" target="_blank">
        ipusiron/day083-ai-attack-path-finder
      </a> ）
    </div>
  </footer>

  <script src="./js/main.js"></script>
</body>
</html>
